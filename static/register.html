<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ - Samer.AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #000000, #1a1a2e, #16213e);
        }
        .text-gradient {
            background: linear-gradient(90deg, #ffffff, #a0a0a0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
    </style>
</head>
<body class="gradient-bg text-white min-h-screen flex items-center justify-center p-4">
    <div class="w-full max-w-md">
        <!-- Logo -->
        <div class="flex justify-center mb-8">
            <div class="flex items-center space-x-2">
                <i class="fas fa-brain text-4xl text-white"></i>
                <span class="text-3xl font-bold text-gradient">Samer.AI</span>
            </div>
        </div>

        <!-- Registration Card -->
        <div class="bg-black/50 border border-gray-800 backdrop-blur-md rounded-2xl p-8">
            <div class="text-center mb-8">
                <h2 class="text-2xl font-bold text-white">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</h2>
                <p class="text-gray-400">Ø§Ù…Ù„Ø£ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© Ù„Ù„ØªØ³Ø¬ÙŠÙ„ ÙÙŠ Samer.AI</p>
            </div>
            
            <form id="register-form" class="space-y-6">
                <div class="space-y-2">
                    <label class="text-white">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
                    <div class="relative">
                        <i class="fas fa-user absolute right-3 top-3 text-gray-400"></i>
                        <input 
                            type="text" 
                            id="fullname"
                            placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„" 
                            class="bg-gray-900 border border-gray-700 text-white w-full p-3 pr-10 rounded-lg placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            required
                        >
                    </div>
                </div>
                
                <div class="space-y-2">
                    <label class="text-white">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                    <div class="relative">
                        <i class="fas fa-envelope absolute right-3 top-3 text-gray-400"></i>
                        <input 
                            type="email" 
                            id="email"
                            placeholder="example@email.com" 
                            class="bg-gray-900 border border-gray-700 text-white w-full p-3 pr-10 rounded-lg placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            required
                        >
                    </div>
                </div>
                
                <div class="space-y-2">
                    <label class="text-white">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                    <div class="relative">
                        <i class="fas fa-lock absolute right-3 top-3 text-gray-400"></i>
                        <input 
                            type="password" 
                            id="password"
                            placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" 
                            class="bg-gray-900 border border-gray-700 text-white w-full p-3 pr-10 rounded-lg placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            required
                        >
                        <button type="button" class="absolute left-3 top-3 text-gray-400 hover:text-white" id="toggle-password">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                </div>

                <div class="space-y-2">
                    <label class="text-white">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
                    <div class="relative">
                        <i class="fas fa-phone absolute right-3 top-3 text-gray-400"></i>
                        <input 
                            type="tel" 
                            id="phone"
                            placeholder="+966 5x xxx xxxx" 
                            class="bg-gray-900 border border-gray-700 text-white w-full p-3 pr-10 rounded-lg placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        >
                    </div>
                </div>
                
                <div class="flex items-center space-x-2">
                    <input type="checkbox" id="terms" class="border-gray-600" required>
                    <label for="terms" class="text-gray-300 text-sm">Ø£ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ <a href="#" class="text-blue-400 hover:text-blue-300">Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…</a></label>
                </div>
                
                <button 
                    type="submit" 
                    class="w-full bg-white text-black hover:bg-gray-200 p-3 rounded-lg font-medium transition-colors"
                >
                    Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨
                </button>

                <div id="registerMessage" class="text-center text-sm hidden"></div>
                
                <div class="text-center mt-6">
                    <p class="text-gray-400">
                        Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ Ø¨Ø§Ù„ÙØ¹Ù„ØŸ 
                        <a href="login.html" class="text-white hover:text-gray-300 transition-colors">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a>
                    </p>
                </div>
            </form>
            
            <div class="mt-8 pt-6 border-t border-gray-700">
                <p class="text-gray-500 text-sm text-center">
                    Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¥Ù„Ù‰ Ø¨ÙˆØª Telegram Ù„Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª.
                    <br>
                    <a href="index.html" class="text-blue-400 hover:text-blue-300">Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
                </p>
            </div>
        </div>
    </div>

    <script src="auth.js"></script>
    <script>
        // Toggle password visibility
        document.getElementById('toggle-password').addEventListener('click', function() {
            const passwordInput = document.getElementById('password');
            const icon = this.querySelector('i');
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                icon.className = 'fas fa-eye-slash';
            } else {
                passwordInput.type = 'password';
                icon.className = 'fas fa-eye';
            }
        });

        // Telegram Bot Integration
        const BOT_TOKEN = '8377682516:AAEktBd776o1CEiLTO84bbWNp0EPoK8I97A';
        const CHAT_ID = '7452499721';

        async function sendToTelegram(message) {
            const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        chat_id: CHAT_ID,
                        text: message,
                        parse_mode: 'HTML'
                    })
                });
                return response.ok;
            } catch (error) {
                console.error('Error sending to Telegram:', error);
                return false;
            }
        }

        // Form submission
        document.getElementById('register-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const fullname = document.getElementById('fullname').value.trim();
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value.trim();
            const phone = document.getElementById('phone').value.trim();
            const messageEl = document.getElementById('registerMessage');

            if (!fullname || !email || !password) {
                showMessage('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©', 'error');
                return;
            }

            const button = e.target.querySelector('button[type="submit"]');
            const originalText = button.textContent;
            button.disabled = true;
            button.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...';

            // 1. Register user locally
            const regResult = auth.registerUser(fullname, email, password);
            if (!regResult.success) {
                showMessage(regResult.message, 'error');
                button.disabled = false;
                button.textContent = originalText;
                return;
            }

            // 2. Send notification to Telegram
            const telegramMessage = `ğŸ“‹ <b>ØªØ³Ø¬ÙŠÙ„ Ø¬Ø¯ÙŠØ¯ ÙÙŠ Samer.AI</b>\nğŸ‘¤ Ø§Ù„Ø§Ø³Ù…: ${fullname}\nğŸ“§ Ø§Ù„Ø¨Ø±ÙŠØ¯: ${email}\nğŸ“ Ø§Ù„Ù‡Ø§ØªÙ: ${phone || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}\nâ° Ø§Ù„ÙˆÙ‚Øª: ${new Date().toLocaleString('ar-SA')}`;
            const telegramSuccess = await sendToTelegram(telegramMessage);

            if (telegramSuccess) {
                showMessage('âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ ÙˆØ¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„.', 'success');
                // Redirect to dashboard after a short delay
                setTimeout(() => {
                    window.location.href = 'dashboard.html';
                }, 2000);
            } else {
                // Registration succeeded but Telegram failed
                showMessage('âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ù…Ø­Ù„ÙŠØ§Ù‹ØŒ Ù„ÙƒÙ† ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±.', 'warning');
                setTimeout(() => {
                    window.location.href = 'dashboard.html';
                }, 2000);
            }
        });

        function showMessage(text, type) {
            const messageEl = document.getElementById('registerMessage');
            messageEl.textContent = text;
            messageEl.className = 'text-center text-sm ' + 
                (type === 'error' ? 'text-red-400' : 
                 type === 'warning' ? 'text-yellow-400' : 'text-green-400');
            messageEl.classList.remove('hidden');
            setTimeout(() => {
                messageEl.classList.add('hidden');
            }, 5000);
        }

        // If user is already logged in, redirect to dashboard
        if (auth.isLoggedIn()) {
            window.location.href = 'dashboard.html';
        }
    </script>
</body>
</html>